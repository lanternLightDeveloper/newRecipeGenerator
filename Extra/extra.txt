Tomato And Anchovy Pasta
Savor the bold flavors of this Tomato and Anchovy Pasta, a perfect weeknight meal that's both simple and satisfying. With a zesty tomato sauce and umami-packed anchovies, this dish will have your taste buds dancing in no time!

Servings: 4

Tags: Italian, Pasta, Tomato, Easy, Dinner, Cheese, Garlic 

Nutrition
677 calories, 109g carbs, 13g fat, 24g protein

Ingredients
1 tablespoon unsalted butter
10 anchovy filets, finely chopped, divided
½ cup panko bread crumbs
½ cup grated Parmigiano-Reggiano cheese
¼ cup plus 1 tablespoon extra-virgin olive oil, divided
6 cloves garlic, minced
½ teaspoon red pepper flakes
2 pints cherry tomatoes, halved
1 teaspoon kosher salt, plus more to taste
1 cup white wine
1 pound spaghetti, cooked al dente, ¼ cup cooking water reserved
Lemon zest, to taste
Instructions
Melt the butter in a large skillet over medium heat. Add 4 of the chopped anchovy filets and cook for 1 minute, until they begin to melt.
Add the panko bread crumbs and cook for 3 minutes, stirring frequently, until golden brown. Transfer the bread crumbs to a medium bowl and let cool to room temperature. Once cooled, toss with the Parmigiano-Reggiano cheese.
Heat ¼ cup (60 ml) of olive oil in a medium saucepan over medium-high heat. Once the oil begins to shimmer, add the remaining 6 anchovies and cook for 2 minutes, stirring frequently, until the anchovies begin to melt into the oil.
Add the garlic and red pepper flakes and cook for 30 seconds, until fragrant.
Add the tomatoes and stir to coat in the oil. Season with 1 teaspoon of salt and cook for 5 minutes, or until the tomatoes just begin to soften.
Add the white wine and reduce the heat to low. Cook for 5 minutes, or until the sauce is reduced by half.
Add cooked pasta and reserved cooking water to the pot with the tomatoes and stir to combine. Cook for 1 minute, until the pasta is well coated and saucy. Drizzle with the remaining tablespoon of olive oil and season with salt. Toss to coat.
Serve the pasta topped with the anchovy bread crumbs and lemon zest
Enjoy!


{
		id: 10,
		name: 'Tomato And Anchovy Pasta',
        servings: '4',
		ingredients: ['butter', 'anchovies', 'panko', 'Parmigiano-Reggiano', 'olive oil', 'garlic', 'red pepper', 'tomatoes', 'salt', 'white wine', 'spaghetti', 'water', 'lemon zest'],
		instructions:[ ' Melt the butter in a large skillet over medium heat. Add 4 of the chopped anchovy filets and cook for 1 minute, until they begin to melt',  
       ' Add the panko bread crumbs and cook for 3 minutes, stirring frequently, until golden brown. Transfer the bread crumbs to a medium bowl and let cool to room temperature. Once cooled, toss with the Parmigiano-Reggiano cheese.',
        'Heat ¼ cup (60 ml) of olive oil in a medium saucepan over medium-high heat. Once the oil begins to shimmer, add the remaining 6 anchovies and cook for 2 minutes, stirring frequently, until the anchovies begin to melt into the oil.',
        'Add the garlic and red pepper flakes and cook for 30 seconds, until fragrant.',
        'Add the tomatoes and stir to coat in the oil. Season with 1 teaspoon of salt and cook for 5 minutes, or until the tomatoes just begin to soften.',
        'Add the white wine and reduce the heat to low. Cook for 5 minutes, or until the sauce is reduced by half.',
        'Add cooked pasta and reserved cooking water to the pot with the tomatoes and stir to combine. Cook for 1 minute, until the pasta is well coated and saucy. Drizzle with the remaining tablespoon of olive oil and season with salt. Toss to coat.',
        'Serve the pasta topped with the anchovy bread crumbs and lemon zest',
        'Enjoy! '],
		tags: ['Italian', 'pasta', 'tomato', 'easy', 'dinner', 'cheese', 'garlic'],
		nutrition: '677 calories, 109g carbs, 13g fat, 24g protein', 
		time: 25
	},

























    /////////////////////////////////////








    <script lang="ts">
	import RecipeCard from '$lib/RecipeCard.svelte';
	import type { Recipe } from '$lib/data/Recipes';
	import { Starch } from '$lib/data/Starch';
	import { Vegetables } from '$lib/data/Vegetables';
	import { Sandwiches } from '$lib/data/Sandwiches';
	import { Soups } from '$lib/data/Soups';
	import { Mains } from '$lib/data/Mains';
	import { Desserts } from '$lib/data/Desserts';

	let includeStarch = $state(true);
	let includeVeg = $state(true);
	let includeSandwiches = $state(true);
	let includeSoup = $state(true);
	let includeMain = $state(true);
	let includeDessert = $state(true);
	let glutenFreeOnly = $state(false);
	let vegetarianFriendly = $state(false);
	let economic = $state(false);
	let fastComplete = $state(false);
	let easyComplete = $state(false);

	let meal = $state<{
		starch?: Recipe;
		veg?: Recipe;
		sandwiches?: Recipe;
		soup?: Recipe;
		main?: Recipe;
		dessert?: Recipe;
	}>({});


	let selectedIngredients = $state({
		starch: {
			rice: false,
			potatoes: false,
			noodles: false
		},
		vegetables: {
			tofu: false,
			broccoli: false,
			carrots: false,
			corn: false,
			mushrooms: false
		},
		meats: {
			chicken: false,
			pork: false,
			beef: false,
			tuna: false,
			salmon: false,
			shrimp: false
		}
	});

	function generateMeal() {
		const newMeal: typeof meal = {};

		function getRandomRecipe(list) {
			let filtered = list;

			// Tag filters (keep your current logic)
			if (glutenFreeOnly) filtered = filtered.filter((r) => r.tags?.includes('gluten-free'));
			if (vegetarianFriendly) filtered = filtered.filter((r) => r.tags?.includes('vegetarian'));
			if (economic) filtered = filtered.filter((r) => r.tags?.includes('economic'));
			if (fastComplete) filtered = filtered.filter((r) => r.tags?.includes('fast'));
			if (easyComplete) filtered = filtered.filter((r) => r.tags?.includes('easy'));

			// Ingredient filters
			const activeIngredients = Object.entries(selectedIngredients)
				.filter(([_, checked]) => checked)
				.map(([ingredient]) => ingredient.toLowerCase());

			if (activeIngredients.length) {
				filtered = filtered.filter((recipe) =>
					activeIngredients.some((ing) =>
						recipe.ingredients.some((i) => i.toLowerCase().includes(ing))
					)
				);
			}

			if (!filtered.length) return null;
			return filtered[Math.floor(Math.random() * filtered.length)];
		}

		if (includeStarch && Starch.length) newMeal.starch = getRandomRecipe(Starch);
		if (includeVeg && Vegetables.length) newMeal.veg = getRandomRecipe(Vegetables);
		if (includeSandwiches && Sandwiches.length) newMeal.sandwiches = getRandomRecipe(Sandwiches);
		if (includeSoup && Soups.length) newMeal.soup = getRandomRecipe(Soups);
		if (includeMain && Mains.length) newMeal.main = getRandomRecipe(Mains);
		if (includeDessert && Desserts.length) newMeal.dessert = getRandomRecipe(Desserts);

		meal = newMeal;
	}

	function saveMealAsText() {
		let text = '--- Your Meal ---\n\n';

		for (const [key, recipe] of Object.entries(meal)) {
			if (!recipe) continue;
			text += `${key.toUpperCase()}: ${recipe.name}\n`;
			text += `Servings: ${recipe.servings}\n`;
			text += `Time: ${recipe.time} minutes\n`;
			text += `Nutrition: ${recipe.nutrition}\n\nIngredients:\n`;
			recipe.ingredients.forEach((ing) => (text += `- ${ing}\n`));
			text += '\nInstructions:\n';
			recipe.instructions.forEach((step, i) => (text += `${i + 1}. ${step}\n`));
			text += '\n----------------------\n\n';
		}

		// create a blob and trigger download
		const blob = new Blob([text], { type: 'text/plain' });
		const url = URL.createObjectURL(blob);
		const a = document.createElement('a');
		a.href = url;
		a.download = 'meal.txt';
		a.click();
		URL.revokeObjectURL(url);
	}

	function reroll(category: keyof typeof meal) {
		const sources = {
			starch: Starch,
			veg: Vegetables,
			sandwiches: Sandwiches,
			soup: Soups,
			main: Mains,
			dessert: Desserts
		};

		const list = sources[category];
		if (list && list.length) {
			let filtered = list;
			if (glutenFreeOnly) {
				filtered = list.filter((r) => r.tags?.includes('gluten-free'));
			}
			if (vegetarianFriendly) {
				filtered = list.filter((r) => r.tags?.includes('vegetarian'));
			}
			if (economic) {
				filtered = list.filter((r) => r.tags?.includes('economic'));
			}
			if (fastComplete) {
				filtered = list.filter((r) => r.tags?.includes('fast'));
			}
			if (easyComplete) {
				filtered = list.filter((r) => r.tags?.includes('easy'));
			}
			if (filtered.length) {
				meal = { ...meal, [category]: filtered[Math.floor(Math.random() * filtered.length)] };
			}
		}
	}

	let isMenuOpen = $state(true);
	let isTuningOpen = $state(false);

	function toggleMenu() {
		isMenuOpen = !isMenuOpen;
	}

	function showMoreFineTuning() {
		isTuningOpen = !isTuningOpen;
	}

	const allIngredients = Array.from(
		new Set(
			Mains.concat(Starch, Soups, Vegetables, Sandwiches, Desserts).flatMap((r) =>
				r.ingredients.map((i) => i.split(',')[0].toLowerCase().trim())
			)
		)
	);
</script>

<main>
	<div class:open={isMenuOpen}>
		{#if isMenuOpen}
			<section class="block-Selection-List">
				<p>Select to include</p>
				<article class="controls">
					<p>Guides</p>
					<br />
					<label for="MakeGf">
						<a style="color: var(--txt-1);" href="/MakeGf">Gluten free guide</a>
					</label>

					<label for="MakeVeg">
						<a style="color: var(--txt-1);" href="/MakeVeg">Vegetarian swap guide</a>
					</label>
					<p class="double-Block">Keywords</p>

					<label>
						<input type="checkbox" bind:checked={glutenFreeOnly} /> Gluten-Free Only
					</label>
					<label>
						<input type="checkbox" bind:checked={vegetarianFriendly} /> Vegetarian
					</label>
					<label>
						<input type="checkbox" bind:checked={economic} /> Economic
					</label>
					<label>
						<input type="checkbox" bind:checked={fastComplete} /> Fast
					</label>
					<label>
						<input type="checkbox" bind:checked={easyComplete} /> Easy
					</label>

					<p class="double-Block">Meal Options</p>
					<br />
					<label><input type="checkbox" bind:checked={includeStarch} /> Starch</label>
					<label><input type="checkbox" bind:checked={includeVeg} /> Vegetable</label>
					<label><input type="checkbox" bind:checked={includeSandwiches} /> Sandwiches</label>
					<label><input type="checkbox" bind:checked={includeSoup} /> Soup</label>
					<label><input type="checkbox" bind:checked={includeMain} /> Main</label>
					<label><input type="checkbox" bind:checked={includeDessert} /> Dessert</label>
					<br /> 
					<button
						class="btn-Ghost double-Block"
						onclick={showMoreFineTuning}
						onkeydown={() => (isTuningOpen = false)}
					>
						Filter by Ingredient & Fine tune your choices
					</button>

					{#if isTuningOpen}
						<br />
						<section class="double-Block">
							<div class="ingredient-filters">
						{#each Object.entries(selectedIngredients) as [group, items]}
							<h3>{group.charAt(0).toUpperCase() + group.slice(1)}</h3>
							<div class="filter-group">
								{#each Object.entries(items) as [ingredient, checked]}
									<label>
										<input type="checkbox" bind:checked={selectedIngredients[group][ingredient]} />
										{ingredient.charAt(0).toUpperCase() + ingredient.slice(1)}
									</label>
								{/each}
							</div>
						{/each}
					</div>
						</section>
					{/if}
					<br />

					<div class="double-Block">
						<button class="btn-Fill" onclick={generateMeal}><span> Generate Meal </span></button>
						<button class="btn-Fill" onclick={saveMealAsText} disabled={!Object.keys(meal).length}>
							<span> Save Meal as .TXT </span>
						</button>
					</div>
				</article>
			</section>
		{/if}
	</div>

	<button
		class="btn-Ghost"
		style="margin: 1rem 42%;"
		onclick={toggleMenu}
		onkeydown={() => (isMenuOpen = false)}
	>
		Menu
	</button>
	<section class="grid-Main">
		{#if meal.starch}
			<div>
				<button class="btn-Ghost" onclick={() => reroll('starch')}>Reroll Starch</button>
				<RecipeCard Recipes={meal.starch} />
			</div>
		{/if}

		{#if meal.veg}
			<div>
				<button class="btn-Ghost" onclick={() => reroll('veg')}>Reroll Vegetable</button>
				<RecipeCard Recipes={meal.veg} />
			</div>
		{/if}

		{#if meal.sandwiches}
			<div>
				<button class="btn-Ghost" onclick={() => reroll('sandwiches')}>Reroll Sandwich</button>
				<RecipeCard Recipes={meal.sandwiches} />
			</div>
		{/if}

		{#if meal.soup}
			<div>
				<button class="btn-Ghost" onclick={() => reroll('soup')}>Reroll Soup</button>
				<RecipeCard Recipes={meal.soup} />
			</div>
		{/if}

		{#if meal.main}
			<div>
				<button class="btn-Ghost" onclick={() => reroll('main')}>Reroll Main</button>
				<RecipeCard Recipes={meal.main} />
			</div>
		{/if}

		{#if meal.dessert}
			<div>
				<button class="btn-Ghost" onclick={() => reroll('dessert')}>Reroll Dessert</button>
				<RecipeCard Recipes={meal.dessert} />
			</div>
		{/if}
	</section>
</main>
